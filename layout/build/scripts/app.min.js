!function(){"use strict";angular.module("myApp",["ngRoute","slick","ngMessages","ngCookies","ngAnimate","ngSanitize","ui.bootstrap"]).config(function(e,o){e.when("/registration",{templateUrl:"app/views/Registration.html",controller:"regiController"}).when("/Search",{templateUrl:"app/views/Search.html",controller:"searchController"}).when("/movieDetail/:movieId",{templateUrl:"app/views/movie.html",controller:"showController"}).when("/home",{templateUrl:"app/views/home.html",controller:"movieController"}).when("/update/:movieId",{templateUrl:"app/views/update.html",controller:"updateController"}).when("/add",{templateUrl:"app/views/addMovie.html",controller:"addController"}).when("/rate/:movieId",{templateUrl:"app/views/rateMovie.html",controller:"rateController"}).when("/login",{templateUrl:"app/views/login.html",controller:"loginController"}).otherwise({redirectTo:"/login"}),o.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"})}(),function(){"use strict";function e(e,o,t){function r(){var r=o.defer();return e.get(t.API_HOST+"/employee/user").then(function(e){r.resolve(e.data)},function(e){console.error("Error while fetching Users"),r.reject(e)}),r.promise}function n(r){var n=o.defer();return e({url:t.API_HOST+"/employee/addComment",method:"POST",data:r,headers:{"Content-Type":"application/json "}}).then(function(e){n.resolve(e.data)},function(e){console.error("Error while fetching Users"),n.reject(e)}),n.promise}function i(r){var n=o.defer();return e.get(t.API_HOST+"/getAllComments/"+r).then(function(e){n.resolve(e.data)},function(e){console.error("Error while fetching Users"),n.reject(e)}),n.promise}function l(r){var n=o.defer();return e({method:"DELETE",url:t.API_HOST+"/deleteMovie/"+r}).then(function(e){n.resolve(e.data)},function(e){console.error("Error while fetching Users"),n.reject(e)}),n.promise}function s(r,n){var i=o.defer();return e({url:t.API_HOST+"/movie/"+r,method:"PUT",data:n}).then(function(e){i.resolve(e.data)},function(e){console.error("Error while fetching Users"),i.reject(e)}),i.promise}function c(r){console.log(t.API_HOST),console.log(r);var n=o.defer();return e({url:t.API_HOST+"/login",method:"POST",data:r,headers:{"Content-Type":"application/json "}}).then(function(e){n.resolve(e.data[0])},function(e){n.reject(e)}),n.promise}function a(r){console.log(r);var n=o.defer();return e({url:t.API_HOST+"/employee/registration",method:"POST",data:r,headers:{"Content-Type":"application/json "}}).then(function(e){n.resolve(e.data[0])},function(e){n.reject(e)}),n.promise}function u(r){console.log(r);var n=o.defer();return e({url:t.API_HOST+"/employee/addMovie",method:"POST",data:r,headers:{"Content-Type":"application/json "}}).then(function(e){n.resolve(e.data[0])},function(e){n.reject(e)}),n.promise}function m(r){console.log(r);var n=o.defer();return e({url:t.API_HOST+"/getAverage",method:"POST",data:r,headers:{"Content-Type":"application/json "}},1e3).then(function(e){n.resolve(e.data)},function(e){n.reject(e)}),n.promise}function d(r){console.log(r);var n=o.defer();return e({url:t.API_HOST+"/employee/addRate",method:"POST",data:r,headers:{"Content-Type":"application/json "}}).then(function(e){n.resolve(e.data[0])},function(e){n.reject(e)}),n.promise}var f=this;f.fetchAllMovies=r,f.fetchOneUser=c,f.addNewUser=a,f.updateMovie=s,f.addNewMovie=u,f.addNewRate=d,f.getAverage=m,f.deleteMovie=l,f.addComment=n,f.getAllComment=i}var o;o=angular.module("myApp"),o.service("restServices",e),e.$inject=["$http","$q","CONFIG"]}(),function(){"use strict";function e(){var e=this,o=[],t="";return e.methods={set:function(e){o=e},setUser:function(e){t=e,console.log(e)},getUser:function(){return t},get:function(e){var t=null;return angular.forEach(o,function(o){o.movieId==e&&(t=o)}),console.log(t),t},getAllMovie:function(){return o},getName:function(o){var t=e.methods.get(o);return null!==t?t.name:null}},e.methods}angular.module("myApp").service("mySer",e)}(window.angular)(function(){"use strict";function e(e,o,t,r){function n(){o.fetchAllMovies().then(function(o){e.set(o),l.movie=e.get(r.movieId),console.log(l.movie),l.dataLoaded=!0},function(e){console.error("Error while fetching Users")})}function i(){console.log("fetchAllUsers1"),o.updateMovie(l.id,l.movie).then(function(o){l.movie=o,e.set(o),console.log(l.movie),l.dataLoaded=!0},function(e){console.error("Error while fetching Users")})}var l=this;l.jet=e.getUser(),console.log(l.jet),l.user=!1,"admin"===l.jet?l.user=!0:"admin"===t.get("userName")?l.user=!0:l.user=!1,l.logout=function(){t.remove("userName")},l.search="",l.id=r.movieId,l.mov=e.get(r.movieId),l.logout=function(){t.remove("userName")},l.submit=function(){i()},l.getMovie=function(){null==l.mov||""==l.mov||void 0==typeof l.mov?n():l.movie=e.get(r.movieId)},l.getMovie()}angular.module("myApp").controller("updateController",e),e.$inject=["mySer","restServices","$cookieStore","$routeParams"]})(),function(){"use strict";function e(e,o,t,r){function n(){r.fetchAllMovies().then(function(t){e.set(t),l.movie=e.get(o.movieId),console.log(l.movie),l.comment1.title=l.movie.title,l.dataLoaded=!0,i()},function(e){console.error("Error while fetching Users")})}function i(){r.getAllComment(l.movie.title).then(function(e){l.comment2=e},function(e){console.error("Error while fetching Users")})}var l=this;l.id=o.movieId,l.jet=e.getUser(),console.log(l.jet),l.comment1={userName:t.get("userName"),title:"",comment:""},"admin"===l.jet?l.user=!0:"admin"===t.get("userName")?l.user=!0:l.user=!1,l.mov=e.get(o.movieId),l.logout=function(){t.remove("userName")},l.addComment1=function(){r.addComment(l.comment1).then(function(e){console.log(e)},function(e){console.error("Error while fetching Users")})},l.delete=function(){r.deleteMovie(o.movieId).then(function(e){console.log("deleted")},function(e){console.error("Error while fetching Users")})},l.getMovie=function(){null==l.mov||""==l.mov||void 0==typeof l.mov?n():(l.movie=e.get(o.movieId),l.comment1.title=l.movie.title,i())},l.getMovie(),l.getFriendName=e.getName}angular.module("myApp").controller("showController",e),e.$inject=["mySer","$routeParams","$cookieStore","restServices"]}(),function(){"use strict";function e(e,o,t){function r(){o.fetchAllMovies().then(function(o){e.set(o),n.movie=e.getAllMovie(),console.log(n.movie),n.dataLoaded=!0},function(e){console.error("Error while fetching Users")})}var n=this;n.mov=e.getAllMovie(),console.log(n.mov),n.getFriendName=e.getName,n.jet=e.getUser(),console.log(n.jet),"admin"===n.jet?n.user=!0:"admin"===t.get("userName")?n.user=!0:n.user=!1;n.movie_label="",n.logout=function(){t.remove("userName")},n.getMovie=function(){null==n.mov||""==n.mov||void 0==typeof n.mov?(r(),console.log("nulllll")):n.movie=n.mov},n.getMovie()}var o=angular.module("myApp");o.controller("searchController",e),e.$inject=["mySer","restServices","$cookieStore"],o.directive("myMovie",function(){return{restrict:"E",scope:{poster:"=",title:"="},templateUrl:"app/views/movieCard.html"}})}(),function(){"use strict";function e(e,o){function t(){e.addNewUser(r.user).then(function(e){r.users=e,console.log("registration"),o.path("/login").replace()},function(e){console.error("Error while fetching Users")})}var r=this;r.message="",r.user={userName:"",passWord:"",emailId:""},r.confirmPassword="",r.users=[],r.data={userName:r.user.userName,passWord:r.user.passWord,emailId:r.user.emailId},r.submit=function(){""!==r.user.userName?t():console.log("error")},r.reset=function(e){e.$setPristine(),e.$setUntouched()}}function o(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,o,t,r){r.$validators.compareTo=function(o){return o==e.otherModelValue},e.$watch("otherModelValue",function(){r.$validate()})}}}var t=angular.module("myApp");t.controller("regiController",e),e.$inject=["restServices","$location"],t.directive("compareTo",o)}()(function(){"use strict";function e(e,o,t,r){function n(){o.fetchAllMovies().then(function(o){e.set(o),l.movie=e.get(t.movieId),l.data.title=l.movie.title,console.log(l.movie),l.dataLoaded=!0},function(e){console.error("Error while fetching Users")})}function i(){o.addNewRate(l.data).then(function(o){e.set(o),l.movie=e.get(t.movieId),console.log(l.movie)},function(e){console.error("Error while fetching Users")})}var l=this;l.mov=e.get(t.movieId),l.jet=e.getUser(),console.log(l.jet),l.data={userName:r.get("userName"),title:"",rate:""},"admin"===l.jet?l.user=!0:"admin"==r.get("userName")?l.user=!0:l.user=!1,l.logout=function(){r.remove("userName")},l.getMovie=function(){null==l.mov||""==l.mov||void 0==typeof l.mov?n():(l.movie=e.get(t.movieId),l.data.title=l.movie.title)},l.getMovie(),l.submit=function(){i()},l.rate="",l.max=10,l.isReadonly=!1,l.hoveringOver=function(e){l.overStar=e,l.percent=e/l.max*100},l.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}]}angular.module("myApp").controller("rateController",e),e.$inject=["mySer","restServices","$routeParams","$cookieStore"]})()(function(){"use strict";function e(e,o,t){function r(){console.log("fetchAllUsers1"),o.getAverage(n.result).then(function(o){console.log(o),n.result1=o,n.withAverage=[],angular.forEach(o,function(e){angular.forEach(n.movie,function(o){e.title==o.title&&(o.average=e.average,n.withAverage.push(o))})}),e.set(n.withAverage),console.log(n.withAverage)},function(e){console.error("Error while fetching Users")})}var n=this;n.mov=e.getAllMovie(),n.search="",n.jet=e.getUser(),console.log(t.get("userName")),"admin"===n.jet?n.user=!0:"admin"===t.get("userName")?n.user=!0:n.user=!1,console.log(n.mov),n.logout=function(){t.remove("userName")},function(){console.log("fetchAllUsers1"),o.fetchAllMovies().then(function(e){n.movie=e,n.dataLoaded=!0,n.result=[],angular.forEach(n.movie,function(e){null!=e.title&&n.result.push(e.title)}),console.log(n.result),r()},function(e){console.error("Error while fetching Users")})}()}angular.module("myApp").controller("movieController",e),e.$inject=["mySer","restServices","$cookieStore"]})(),function(){"use strict";function e(e,o,t,r){function n(){o.fetchOneUser(i.user).then(function(o){i.users=o,console.log(i.users),null==i.users||""==i.users||void 0==typeof i.users?(console.log("login_unsuccessful"),i.notUser=!0):i.users.userName===i.user.userName&&i.users.passWord===i.user.password?(console.log("login_successful"),e.path("/home"),t.setUser(i.users.userName),r.put("userName",i.users.userName)):(console.log("login_unsuccessful"),i.createFailed=!0)},function(e){console.error("Error while fetching Users")})}var i=this;i.user={empId:null,userName:"",passWord:"",position:""},i.createFailed=!1,i.usered=[],console.log(i.user.userName),i.submit=function(){n()}}angular.module("myApp").controller("loginController",e),e.$inject=["$location","restServices","mySer","$cookieStore"]}(),function(){"use strict";function e(e,o,t,r){function n(){o.addNewMovie(i.movie).then(function(e){i.users=e,console.log("add success full")},function(e){console.error("Error while fetching Users")})}var i=this;i.logout=function(){$cookieStore.remove("userName")},i.movie={title:"",year:"",rated:"",released:"",runtime:"",genre:"",director:"",writer:"",actors:"",plot:"",language:"",country:"",awards:"",poster:"",metaScore:"",imdbRating:"",imdbVotes:"",imdbId:"",type:""},i.add=function(){n()}}angular.module("myApp").controller("addController",e),e.$inject=["mySer","restServices","$routeParams","$location"]}(),function(){"use strict";angular.module("myApp").constant("CONFIG",{API_HOST:"http://localhost:8082/Movie"})}();